<style>
    .ng-enter {
        -webkit-transition: .3s;
        transition: .3s;
        opacity: 0;
    }
    .ng-enter-active {
        opacity: 1;
        -webkit-transition: .35s;
        transition: .5s;
    }
</style>


<div class="row" data-ng-animate="'slide'">
    <div data-ng-controller="RequestReservation" class="container" >

    <h3 style="padding-bottom: 10px;">Reservation Request Form</h3>


    <div ng-show="!userLoggedIn">
        <div class="alert alert-danger" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>

            Login to access the reservation request feature.
        </div>
    </div>


    <div ng-show="userLoggedIn">

        <form class="form-horizontal">


          <div class="panel panel-default">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Available Reservation</h3>
              </div>

              <div class="panel-body">
                  <div class="alert alert-info animate-show animate-hide" role="alert" ng-hide="!hideBasicInfo">
                      <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>

                      Select Reservation Type to Continue
                  </div>


                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Reservation Type</label>

                      <div class="col-sm-6">
                          <select ng-model="rentalCodeSearch" class="form-control" style="width: 240px;" ng-change="setNewRental()">
                              <option value="">--Select Rental Type--</option>
                              <option ng-repeat="rentalRow in rentalDropDown" value="{{rentalRow.item_id}}">{{rentalRow.item_name}}</option>
                          </select>
                      </div>
                  </div>


                  <div class="form-group animate-show animate-hide" ng-hide="hideBasicInfo">
                      <label class="col-sm-2 control-label-center">Description</label>

                      <div class="col-sm-6">
                          <label class="control-label-center" style="font-weight: normal;">{{rentalDescription}}</label>
                      </div>
                  </div>

              </div>
          </div>




          <div class="panel panel-default animate-show animate-hide" ng-hide="hideBasicInfo">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Available Facilities</h3>
              </div>

              <div class="panel-body">


                  <label class="col-sm-2 control-label-center">Facilities</label>

                  <div class="col-sm-6">
                      <div class="form-vertical" ng-repeat="fac in rentalFacilities">

                          <checkbox class="btn-default checkbox-dark-border" ng-model="fac.checked" ng-change="onFacilityChecked()" id="{{fac.item_id}}{{}}"/>
                          <label for="{{fac.item_id}}{{}}" style="font-weight: normal;">{{fac.item_name}}</label>

                      </div>
                  </div>


              </div>
          </div>



          <div class="panel panel-default animate-show animate-hide" ng-hide="hideBasicInfo">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Reservation Details</h3>
              </div>

              <div class="panel-body">


                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Requested Date*</label>
                      <div class="col-sm-6">
                          <div class="input-group">
                           <span class="input-group-addon " style="width: 25px;">
                                 <i class="glyphicon glyphicon-calendar "></i>
                            </span>
                                  <input class="form-control" ng-model="selectedDate" name="date" bs-datepicker type="text" style="width: 150px;">

                          <span class="input-group-addon" style="width: 250px;background-color: #ffffff; visibility: hidden;">

                            </span>
                          </div>
                      </div>
                  </div>

                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Start Time*</label>
                      <div class="col-sm-6">
                          <div class="input-group">
                              <div class="input-group-addon" style="width: 25px;"><i class="glyphicon glyphicon-time"></i></div>
                              <input class="form-control" size="8" ng-model="startTime" name="startTime" bs-timepicker data-length="1"
                                     data-minute-step="15" data-arrow-behavior="picker" type="text" style="width: 150px;" ng-change="timeChanged()">

                          </div>
                      </div>
                  </div>

                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">End Time*</label>
                      <div class="col-sm-6">
                          <div class="input-group">
                              <div class="input-group-addon" style="width: 25px;"><i class="glyphicon glyphicon-time"></i></div>
                              <input class="form-control" size="8" ng-model="endTime" name="endTime" bs-timepicker data-length="1"
                                     data-minute-step="15" data-arrow-behavior="picker" type="text" style="width: 150px;" ng-change="timeChanged()">
                          </div>
                      </div>
                  </div>


                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Additional Information</label>
                      <div class="col-sm-6">
                          <textarea class="textarea-responsive" ng-model="reservationDetails"></textarea>
                      </div>
                  </div>
              </div>
          </div>


          <div class="panel panel-default animate-show animate-hide" ng-show="!hideBasicInfo && displayPackages">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Add-Ons</h3>
              </div>

              <div class="panel-body">

                  <div class="table-responsive hidden-xs">

                      <table class="table" style="margin-bottom: 0px;">
                          <thead>
                          <tr>
                              <td></td>
                              <td><strong>Add-On Name</strong></td>
                              <td><strong>Add-On Code</strong></td>
                              <td><strong>Fee(s)</strong></td>
                          </tr>
                          </thead>
                          <tbody >
                          <tr data-ng-repeat="pkg in rentalPackages" >
                              <td scope="row" style=" border:0px !important;">
                                  <div class="form-group" >
                                      <div class="col-sm-6">
                                          <checkbox class="btn-default checkbox-dark-border" data-ng-if="pkg.required" data-ng-model="pkg.selected" id="{{pkg.item_id}}"  name="pkg.item_id" required/>
                                          <checkbox class="btn-default checkbox-dark-border" data-ng-if="!pkg.required" data-ng-model="pkg.selected" id="{{pkg.item_id}}"  name="pkg.item_id"/>
                                      </div>
                                  </div>
                              </td>
                              <td style=" border:0px !important;"><label for="{{pkg.item_id}}" style="font-weight: normal;">{{pkg.item_name}}</label></td>
                              <td style=" border:0px !important;"><label for="{{pkg.item_id}}" style="font-weight: normal;">{{pkg.item_code}}</label></td>
                              <td style=" border:0px !important;"><p data-ng-repeat="pkgfee in pkg.fees">{{pkgfee.fee_name}} ${{pkgfee.fee_amount}}</p></td>
                          </tr>
                          </tbody>
                      </table>
                  </div>

                  <div class="table-responsive visible-xs" style="border:0px !important;">
                      <table class="table" style="margin-bottom: 0px;">

                          <tbody>
                          <tr data-ng-repeat="pkg in rentalPackages">
                              <td scope="row" style=" border:0px !important;">
                                  <div class="form-group" >
                                      <div class="col-sm-6">
                                          <checkbox class="btn-default checkbox-dark-border" data-ng-if="pkg.required" data-ng-model="pkg.selected" id="{{pkg.item_id}}" name="pkg.item_id" required/>
                                          <checkbox class="btn-default checkbox-dark-border" data-ng-if="!pkg.required" data-ng-model="pkg.selected" id="{{pkg.item_id}}" name="pkg.item_id"/>
                                      </div>
                                  </div>
                              </td>
                              <td style=" border:0px !important;">
                                  <p><label for="{{pkg.item_id}}" style="font-weight: normal;">{{pkg.item_name}}</label></p>
                                  <p><label for="{{pkg.item_id}}" style="font-weight: normal;">{{pkg.item_code}}</label></p>
                                  <p data-ng-repeat="pkgfee in pkg.fees"><label for="{{pkg.item_id}}" style="font-weight: normal;">{{pkgfee.fee_name}} ${{pkgfee.fee_amount}}</label></p>
                              </td>
                          </tr>
                          </tbody>
                      </table>
                  </div>

              </div>
          </div>



          <div class="panel panel-default animate-show animate-hide" ng-show="!hideBasicInfo && displayCustomFields">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Options</h3>
              </div>

              <div class="panel-body">

                  <div ng-repeat="field in rentalCustomFields">
                      <!-- TEXT FIELDS -->
                      <div ng-if="field.type=='text'" class="form-group">
                          <label class="col-sm-2 control-label-center">{{field.label}}</label>
                          <div class="col-sm-6">
                              <input type="{{field.type}}" id="{{field.id}}" data-ng-model="rentalCustomFields[$index].response_value" class="form-control" required/>
                          </div>
                      </div>

                      <!-- NUMERIC FIELDS -->
                      <div ng-if="field.type=='number'" class="form-group">
                          <label class="col-sm-2 control-label-center">{{field.label}}</label>
                          <div class="col-sm-6">
                              <input type="text" id="{{field.name}}" data-ng-model="rentalCustomFields[$index].response_value"  class="form-control" required/>
                          </div>
                      </div>

                      <!-- SELECT FIELDS -->
                      <div ng-if="field.type=='select'" class="form-group" >
                          <label class="col-sm-2 control-label-center">{{field.label}}</label>
                          <div class="col-sm-6">
                              <select data-ng-model="rentalCustomFields[$index].response_value" class="form-control" prompt="Select One" required>
                                  <option data-ng-repeat="option in field.options">{{option}}</option>
                              </select>
                          </div>
                      </div>

                      <!-- CHECKBOX FIELDS -->
                      <div ng-if="field.type=='checkbox'" class="form-group" >
                          <label class="col-sm-2 control-label-center">{{field.label}}</label>
                          <div class="col-sm-6">
                              <!--<checkbox class="btn-default checkbox-dark-border" data-ng-if="rentalCustomFields[$index].required" data-ng-model="rentalCustomFields[$index].response_value"  name="taskGroup" id="{{field.name}}" value="{{field.id}}" required/>
                              <checkbox class="btn-default checkbox-dark-border" data-ng-if="!rentalCustomFields[$index].required" data-ng-model="rentalCustomFields[$index].response_value"  name="taskGroup" id="{{field.name}}" value="{{field.id}}"/>

                              --><checkbox class="btn-default checkbox-dark-border" data-ng-if="rentalCustomFields[$index].required" data-ng-model="rentalCustomFields[$index].response_value" required></checkbox>
                              <checkbox class="btn-default checkbox-dark-border" data-ng-if="!rentalCustomFields[$index].required" data-ng-model="rentalCustomFields[$index].response_value"></checkbox>
                          </div>
                      </div>
                  </div>

              </div>
          </div>


          <div class="panel panel-default animate-show animate-hide" ng-hide="hideBasicInfo">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Personal Information</h3>
              </div>

              <div class="panel-body">

                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Email Address</label>

                      <div class="col-sm-6">
                          <input ng-model="emailAddress" type="email" class="form-control" style="width: 250px;" />
                      </div>
                  </div>

                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Phone Number</label>

                      <div class="col-sm-6">
                          <input ng-model="phoneNumber" type="text" class="form-control" style="width: 150px;" maxlength="10"/>
                      </div>
                  </div>

                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Preferred Contact Method*</label>

                      <div class="col-sm-6">
                          <select class="form-control" style="width: 125px;" ng-model="contactMethod">
                              <option value="">--Select--</option>
                              <option value="P">Phone</option>
                              <option value="E">Email</option>
                          </select>
                      </div>
                  </div>

                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Additional Notes</label>

                      <div class="col-sm-6">
                          <textarea ng-model="reservationNotes" class="textarea-responsive"></textarea>
                      </div>
                  </div>

              </div>
          </div>



          <div class="panel panel-default animate-show animate-hide" ng-hide="hideBasicInfo">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Payment Information</h3>
              </div>

              <div class="panel-body">
                  <div class="form-group">
                      <label class="col-sm-2 control-label-center">Estimated Cost</label>

                      <div class="col-sm-10">
                          <label  class=" control-label-center">{{feeAmount | currency}} (Includes $0.00 deposit)</label>
                          <br>
                          <p>The estimated rental cost is based on information supplied at the time of the request and may change
                              according to additional information, change in rental request, and/or residency status of the renter. This
                              request is not an official rental until it has been approved and the renter has paid in full.</p>
                      </div>
                  </div>

              </div>
          </div>

          <div class="panel panel-default animate-show animate-hide" ng-hide="hideBasicInfo">
              <div class="panel-heading clearfix">
                  <h3 class="panel-title">Agreement & Waivers</h3>
              </div>

              <div class="panel-body">
                  <div class="form-group">


                      <div class="col-sm-12 ">


                              <label  data-placement="bottom-left" data-type="info" bs-enabled="agreementSigned.checked" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none; font-weight: normal;"
                                     unselectable="on"
                                     onselectstart="return false;"
                                     onmousedown="return false;">
                                  <checkbox class="btn-default checkbox-dark-border" ng-model="agreementSigned.checked" />  I have read, understand, and agree to the <a href="" target="_blank" style="font-weight: bold;">Terms and Conditions</a> regarding The Parks and Recreation Facility Reservations and Refund/Cancelation Policy.
                              </label>

                      </div>
                  </div>

              </div>
          </div>



          <div class="form-group animate-show animate-hide" ng-hide="!contactCheckAlert" ng-cloak>
              <div class="col-sm-offset-1 col-sm-10 alert alert-danger animate-hide" role="alert" >
                  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                  <span class="sr-only">Error:</span>
                  Terms & Agreement not checked!

                  <span class="close" ng-click="contactCheckAlert=false">&times;</span>
              </div>
          </div>

          <div class="form-group animate-show animate-hide" ng-hide="hideBasicInfo">
              <div class="col-sm-12 text-center">

                    <button type="submit" class="btn btn-info btn-lg " ng-click="onSubmitRequest()">Submit Request</button>

              </div>
          </div>

      </form>

      <h3 class="page-header" style="padding-bottom: 10px;" ng-hide="hideBasicInfo"></h3>
      <h3  style="padding-bottom: 10px;" ng-hide="hideBasicInfo">Reservation Availability</h3>

      <div id='calcontainer' ng-hide="hideBasicInfo">
          <div class="btn-toolbar">
              <div class="btn-group">
                  <button type="button" class="btn btn-primary" ng-class="{active:mode==='month'}"
                          ng-click="changeMode('month')">
                      Month
                  </button>
                  <button type="button" class="btn btn-primary" ng-class="{active:mode==='week'}"
                          ng-click="changeMode('week')">
                      Week
                  </button>
                  <button type="button" class="btn btn-primary" ng-class="{active:mode==='day'}"
                          ng-click="changeMode('day')">
                      Day
                  </button>
              </div>
              <div class="btn-group">
                  <button type="button" class="btn btn-default" ng-disabled="isToday()" style="background-image: linear-gradient(#009900, #329a13 40%, #35a414); border-color:#3ebe17;color: #fff;"
                          ng-click="today()">
                      Today
                  </button>
              </div>
          </div>
          <div >
              <calendar ng-model="currentDate" calendar-mode="mode" event-source="eventSource"
                        range-changed="reloadSource(startTime, endTime)" queryMode="remote"
                        event-selected="onEventSelected(event)"></calendar>
              <br>
          </div>
      </div>
    </div>
  </div>
</div>



<script type="text/ng-template" id="confirmation.html">
    <div class="modal text-left" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title text-Success">Rental Request Submitted</h3>
                </div>
                <div class="modal-body">
                    <p>Your reservation request has successfully been submitted and will</p>
                    <p>be reviewed and someone will get back to you as soon as possible.</p>

                    <p>Thank You</p>

                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" ng-click="$hide()">Close</button>
                </div>
            </div>
        </div>
    </div>
</script>

